<!--<link rel="import" href="../iron-icons/iron-icons.html">-->

<link rel="import" href="../paper-icon-button/paper-icon-button.html">

<link rel="import" href="epiviz-chart-settings.html">

<!--<dom-module id="shared-settings">
  <template>
    <style>
        #chartSettingsIcon {
            /*float: right;*/
            position:absolute;
            top: 0;
            right: 0;
            width: 24px;
            height: 24px;
            
            /*--iron-icon-height: 16px;
            --iron-icon-width: 16px;*/

            border: 1px solid #000;
            border-radius: 2px;
            padding:3px;
            /*background-color: #fff000;*/
        }
    </style>
  </template>
</dom-module>-->

<script>
    epiviz.ChartSettingsBehavior = {

        // properties: {
        //     // iconHidden: true,
        // },

        // hostHovered: function() {
        //     var currSettingIcon = this.$$('#chartSettingsIcon');

        //     // currSettingIcon.setAttribute("hidden", false);
        //     currSettingIcon.hidden = false;
        //     // this.iconHidden = false;
        // },

        // hostUnhovered: function() {
        //     var currSettingIcon = this.$$('#chartSettingsIcon');

        //     currSettingIcon.setAttribute("hidden", true);
        //     // this.iconHidden = true;
        // },

        _showSettingsDialog: function() {
            var self = this;
            var chartContainer = this.$$('#' + this.plotId);
            var currSetting = this.$$('epiviz-chart-settings');

            if(currSetting == null) {
                var currSetting = document.createElement('epiviz-chart-settings');
                currSetting.setAttribute('defs', JSON.stringify(self.chartType.customSettingsDefs()));
                currSetting.setAttribute('vals', JSON.stringify(self.chartSettings));

                Polymer.dom(chartContainer).appendChild(currSetting);
            }
            else {
                currSetting.setAttribute('vals', JSON.stringify(self.chartSettings));
            }

            currSetting.showSettings(self, function(newSettings) {
                self.chartSettings = newSettings;
            });
        },

        _initializeSettingsDialog: function() {
            var chartSettingsContainer = this.$$('#chartSettingsContainer');
            var chartContainer = this.$$('#' + this.plotId);
            var currSettingIcon = this.$$('#chartSettingsIcon');

            if(currSettingIcon == null) {
                var iconElem = document.createElement('paper-icon-button');
                // iconElem.hidden = true;
                iconElem.id = "chartSettingsIcon";
                iconElem.icon = "settings";

                iconElem.addEventListener("click", this._showSettingsDialog.bind(this));
                Polymer.dom(chartSettingsContainer).appendChild(iconElem);
            }
        }        
    }
</script>